<% layout('layouts/boilerplate')%>
<%- include('../partials/navbar2') %>


<div class="flex flex-col items-center justify-center mt-6 font-serif">
    <h1 class="text-3xl font-bold text-center mb-6">Sign Up</h1>
    <div class="max-w-md w-full bg-white p-6 rounded-lg shadow-md">
        <form action="/register" method="POST" class="space-y-4 validated-form" novalidate>
            <div>
                <label class="block text-sm font-medium text-gray-700" for="username">Username</label>
                <input class="w-full text-black p-2 border border-gray-300 rounded-md focus:outline-none focus:ring font-serif" type="text" id="username" name="username" required>
                <p class="hidden text-red-500 text-sm mt-1">Username is required.</p>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700" for="email">Email</label>
                <input class="w-full text-black p-2 border border-gray-300 rounded-md focus:outline-none focus:ring font-serif" type="email" id="email" name="email" required>
                <p class="hidden text-red-500 text-sm mt-1">Email is required.</p>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700" for="password">Password</label>
                <input class="w-full text-black p-2 border border-gray-300 rounded-md focus:outline-none focus:ring font-serif" type="password" id="password" name="password" required>
                <p class="hidden text-red-500 text-sm mt-1">Password is required.</p>
            </div>
            <div>
                <button class="w-full bg-green-500 text-white py-2 rounded-md hover:bg-green-600 transition cursor-pointer font-serif">Sign Up</button>
            </div>
        </form>
    </div>
</div>

<script>
    (function () {
        'use strict';

        const form = document.querySelector('.validated-form');
        const inputs = form.querySelectorAll('input[required]');

        form.addEventListener('submit', function (event) {
            let isValid = true;

            inputs.forEach(input => {
                const errorMessage = input.nextElementSibling;

                if (!input.value.trim()) {
                    event.preventDefault();
                    input.classList.add('border-red-500', 'focus:ring-red-500');
                    errorMessage.classList.remove('hidden');
                    isValid = false;
                } else {
                    input.classList.remove('border-red-500', 'focus:ring-red-500');
                    input.classList.add('border-green-500', 'focus:ring-green-500');
                    errorMessage.classList.add('hidden');
                }
            });

            if (!isValid) {
                event.preventDefault();
            }
        });

        inputs.forEach(input => {
            input.addEventListener('input', function () {
                const errorMessage = input.nextElementSibling;

                if (input.value.trim()) {
                    input.classList.remove('border-red-500', 'focus:ring-red-500');
                    input.classList.add('border-green-500', 'focus:ring-green-500');
                    errorMessage.classList.add('hidden');
                } else {
                    input.classList.remove('border-green-500', 'focus:ring-green-500');
                    input.classList.add('border-red-500', 'focus:ring-red-500');
                    errorMessage.classList.remove('hidden');
                }
            });
        });

    })();
</script>